const fs = require('fs');
const path = require('path');

const tagsPath = path.join(__dirname, '..', 'import', '01-reference', 'tags.json');
const tags = JSON.parse(fs.readFileSync(tagsPath, 'utf-8'));

// Translation map: code -> { ru, zh }
const translations = {
    'TAG-AGED-TEA': { ru: 'Выдержанный чай', zh: '陈茶' },
    'TAG-ALKALINE': { ru: 'Щелочной', zh: '碱性' },
    'TAG-ANCIENT-TREES': { ru: 'Древние деревья', zh: '古树' },
    'TAG-ANTHOCYANIN': { ru: 'Антоцианин', zh: '花青素' },
    'TAG-ANTI-ALLERGIC': { ru: 'Противоаллергический', zh: '抗过敏' },
    'TAG-ANTIOXIDANT': { ru: 'Антиоксидант', zh: '抗氧化' },
    'TAG-ARTISAN': { ru: 'Ремесленный', zh: '匠人手作' },
    'TAG-ASSAM': { ru: 'Ассам', zh: '阿萨姆' },
    'TAG-AUTUMNAL': { ru: 'Осенний сбор', zh: '秋摘' },
    'TAG-AWARD-WINNING': { ru: 'Награждённый', zh: '获奖' },
    'TAG-BALHYOCHA': { ru: 'Бальхёча', zh: '发酵茶(韩)' },
    'TAG-BAOZHONG': { ru: 'Баочжун', zh: '包种' },
    'TAG-BERGAMOT': { ru: 'Бергамот', zh: '佛手柑' },
    'TAG-BIO': { ru: 'Био', zh: '生态' },
    'TAG-BIODYNAMIC': { ru: 'Биодинамический', zh: '生物动力' },
    'TAG-BLACK-TEA': { ru: 'Чёрный чай', zh: '红茶' },
    'TAG-BLEND': { ru: 'Купаж', zh: '拼配' },
    'TAG-BOSEONG': { ru: 'Босон', zh: '宝城' },
    'TAG-BREAKFAST': { ru: 'Утренний', zh: '早餐茶' },
    'TAG-BRICK-TEA': { ru: 'Кирпичный чай', zh: '砖茶' },
    'TAG-BUDDHIST': { ru: 'Буддийский', zh: '佛茶' },
    'TAG-BUG-BITTEN': { ru: 'Укушенный цикадой', zh: '虫咬茶' },
    'TAG-CEREMONIAL': { ru: 'Церемониальный', zh: '仪式级' },
    'TAG-CEYLON-TEA': { ru: 'Цейлонский чай', zh: '锡兰茶' },
    'TAG-CHAI': { ru: 'Масала-чай', zh: '印度奶茶' },
    'TAG-CHARCOAL': { ru: 'Углеобжаренный', zh: '炭焙' },
    'TAG-CHARCOAL-ROAST': { ru: 'Угольная обжарка', zh: '炭火烘焙' },
    'TAG-CITRUS': { ru: 'Цитрусовый', zh: '柑橘' },
    'TAG-CLASSIC': { ru: 'Классический', zh: '经典' },
    'TAG-COLLECTIBLE': { ru: 'Коллекционный', zh: '收藏级' },
    'TAG-CONCENTRATE': { ru: 'Концентрат', zh: '浓缩' },
    'TAG-CTC': { en: 'CTC', ru: 'CTC (гранулированный)', zh: 'CTC切碎' },
    'TAG-CULTIVAR': { ru: 'Культивар', zh: '品种' },
    'TAG-CURLY-LEAF': { ru: 'Скрученный лист', zh: '卷叶' },
    'TAG-DARJEELING': { ru: 'Дарджилинг', zh: '大吉岭' },
    'TAG-DARK-OOLONG': { ru: 'Тёмный улун', zh: '浓香型乌龙' },
    'TAG-DEEP-STEAMED': { ru: 'Глубокого пропаривания', zh: '深蒸' },
    'TAG-DELICATE': { ru: 'Деликатный', zh: '清雅' },
    'TAG-DETOX': { ru: 'Детокс', zh: '排毒' },
    'TAG-DIGESTION': { ru: 'Для пищеварения', zh: '助消化' },
    'TAG-DIMBULA': { ru: 'Димбула', zh: '丁布拉' },
    'TAG-EARL-GREY': { ru: 'Эрл Грей', zh: '伯爵茶' },
    'TAG-ELITE': { ru: 'Элитный', zh: '精品' },
    'TAG-EVENING': { ru: 'Вечерний', zh: '晚间茶' },
    'TAG-EVERYDAY': { ru: 'Повседневный', zh: '日常饮用' },
    'TAG-EXOTIC': { ru: 'Экзотический', zh: '异域风情' },
    'TAG-FERMENTED': { ru: 'Ферментированный', zh: '发酵' },
    'TAG-FIRST-FLUSH': { ru: 'Первый сбор', zh: '头采' },
    'TAG-FLAVORED': { ru: 'Ароматизированный', zh: '调味' },
    'TAG-FLORAL': { ru: 'Цветочный', zh: '花香' },
    'TAG-FRUITY': { ru: 'Фруктовый', zh: '果香' },
    'TAG-FUNCTIONAL': { ru: 'Функциональный', zh: '功能性' },
    'TAG-GABA': { en: 'GABA', ru: 'ГАМК (GABA)', zh: 'GABA茶' },
    'TAG-GIFT': { ru: 'Подарочный', zh: '礼品' },
    'TAG-GOLDEN-FLOWERS': { ru: 'Золотые цветы', zh: '金花' },
    'TAG-GOLDEN-NEEDLE': { ru: 'Золотая игла', zh: '金针' },
    'TAG-GOLDEN-TIPS': { ru: 'Золотые типсы', zh: '金芽' },
    'TAG-GONGFU': { ru: 'Гунфу', zh: '功夫茶' },
    'TAG-GREEN-TEA': { ru: 'Зелёный чай', zh: '绿茶' },
    'TAG-HANDCRAFTED': { ru: 'Ручная работа', zh: '手工制作' },
    'TAG-HANDMADE': { ru: 'Ручного изготовления', zh: '手工制造' },
    'TAG-HANDPICKED': { ru: 'Ручной сбор', zh: '手工采摘' },
    'TAG-HERITAGE': { ru: 'Наследие', zh: '传承' },
    'TAG-HIGH-THEANINE': { ru: 'Высокое содержание теанина', zh: '高茶氨酸' },
    'TAG-HIGHLAND': { ru: 'Высокогорный', zh: '高地' },
    'TAG-HIMALAYAN': { ru: 'Гималайский', zh: '喜马拉雅' },
    'TAG-HONEY': { ru: 'Медовый', zh: '蜜香' },
    'TAG-HWANGCHA': { ru: 'Хванча', zh: '黄茶(韩)' },
    'TAG-HYBRID': { ru: 'Гибридный', zh: '混合品种' },
    'TAG-IMPERIAL': { ru: 'Императорский', zh: '御品' },
    'TAG-INDIAN-TEA': { ru: 'Индийский чай', zh: '印度茶' },
    'TAG-INDONESIAN-TEA': { ru: 'Индонезийский чай', zh: '印尼茶' },
    'TAG-ISLAND': { ru: 'Островной', zh: '岛屿' },
    'TAG-JAPANESE-TEA': { ru: 'Японский чай', zh: '日本茶' },
    'TAG-JAVA': { ru: 'Ява', zh: '爪哇' },
    'TAG-JEJU': { ru: 'Чеджу', zh: '济州' },
    'TAG-JIN-XUAN': { ru: 'Цзинь Сюань', zh: '金萱' },
    'TAG-JUN-CHIYABARI': { ru: 'Джун Чиябари', zh: '君千叶' },
    'TAG-KANDY': { ru: 'Канди', zh: '康提' },
    'TAG-KENYA-TEA': { ru: 'Кенийский чай', zh: '肯尼亚茶' },
    'TAG-KOREAN-TEA': { ru: 'Корейский чай', zh: '韩国茶' },
    'TAG-LARGE-LEAF': { ru: 'Крупнолистовой', zh: '大叶' },
    'TAG-LOTUS': { ru: 'Лотосовый', zh: '莲花' },
    'TAG-LOW-CAFFEINE': { ru: 'Низкий кофеин', zh: '低咖啡因' },
    'TAG-LOWLAND': { ru: 'Низинный', zh: '低地' },
    'TAG-MALTY': { ru: 'Солодовый', zh: '麦芽香' },
    'TAG-MASALA': { ru: 'Масала', zh: '玛萨拉' },
    'TAG-MATCHA': { ru: 'Матча', zh: '抹茶' },
    'TAG-MATCHA-BASE': { ru: 'Основа для матчи', zh: '抹茶基底' },
    'TAG-MENTHOL': { ru: 'Ментоловый', zh: '薄荷脑' },
    'TAG-MID-GROWN': { ru: 'Средневысотный', zh: '中海拔' },
    'TAG-MILK-OOLONG': { ru: 'Молочный улун', zh: '奶香乌龙' },
    'TAG-MUSCATEL': { ru: 'Мускатный', zh: '麝香葡萄' },
    'TAG-NEEDLE': { ru: 'Игольчатый', zh: '针形' },
    'TAG-NEPAL-TEA': { ru: 'Непальский чай', zh: '尼泊尔茶' },
    'TAG-NILGIRI': { ru: 'Нилгири', zh: '尼尔吉里' },
    'TAG-NUTTY': { ru: 'Ореховый', zh: '坚果香' },
    'TAG-NUTTY-AROMA': { ru: 'Ореховый аромат', zh: '坚果香气' },
    'TAG-NUWARA-ELIYA': { ru: 'Нувара Элия', zh: '努瓦勒埃利耶' },
    'TAG-OOLONG-TEA': { ru: 'Улун', zh: '乌龙茶' },
    'TAG-ORIENTAL-BEAUTY': { ru: 'Восточная красавица', zh: '东方美人' },
    'TAG-ORIGINAL': { ru: 'Оригинальный', zh: '原味' },
    'TAG-ORTHODOX': { ru: 'Ортодоксальный', zh: '传统工艺' },
    'TAG-PAN-FIRED': { ru: 'Обжаренный в воке', zh: '炒青' },
    'TAG-POWDER': { ru: 'Порошковый', zh: '粉末' },
    'TAG-POWDERED': { ru: 'Порошкообразный', zh: '粉状' },
    'TAG-PREMIUM': { ru: 'Премиальный', zh: '高端' },
    'TAG-PURPLE-TEA': { ru: 'Пурпурный чай', zh: '紫茶' },
    'TAG-RARE': { ru: 'Редкий', zh: '稀有' },
    'TAG-RARE-TEA': { ru: 'Редкий чай', zh: '稀有茶' },
    'TAG-REFRESHING': { ru: 'Освежающий', zh: '清爽' },
    'TAG-REGIONAL': { ru: 'Региональный', zh: '地方特产' },
    'TAG-RELAXING': { ru: 'Расслабляющий', zh: '放松' },
    'TAG-ROASTED': { ru: 'Обжаренный', zh: '烘焙' },
    'TAG-ROASTED-RICE': { ru: 'С жареным рисом', zh: '烘米' },
    'TAG-ROCK-TEA': { ru: 'Скальный чай', zh: '岩茶' },
    'TAG-ROYAL-PROJECT': { ru: 'Королевский проект', zh: '皇家项目' },
    'TAG-RUHUNA': { ru: 'Рухуна', zh: '卢哈纳' },
    'TAG-SCENTED': { ru: 'Ароматизированный', zh: '窨制' },
    'TAG-SEASONAL': { ru: 'Сезонный', zh: '季节性' },
    'TAG-SECOND-FLUSH': { ru: 'Второй сбор', zh: '二采' },
    'TAG-SEJAK': { ru: 'Седжак', zh: '细雀' },
    'TAG-SELENIUM': { ru: 'Богатый селеном', zh: '富硒' },
    'TAG-SHAN-TUYET': { ru: 'Шан Туйет', zh: '山雪' },
    'TAG-SILK-ROAD': { ru: 'Шёлковый путь', zh: '丝绸之路' },
    'TAG-SILVER-NEEDLE': { ru: 'Серебряные иглы', zh: '银针' },
    'TAG-SINGLE-BUSH': { ru: 'Одиночный куст', zh: '单丛' },
    'TAG-SMOKED': { ru: 'Копчёный', zh: '烟熏' },
    'TAG-SMOKY': { ru: 'Дымный', zh: '烟香' },
    'TAG-SPICED': { ru: 'Пряный', zh: '香料' },
    'TAG-SPRING': { ru: 'Весенний', zh: '春茶' },
    'TAG-STEAMED': { ru: 'Пропаренный', zh: '蒸青' },
    'TAG-STEM-TEA': { ru: 'Стеблевой чай', zh: '茎茶' },
    'TAG-STICKY-RICE': { ru: 'Клейкий рис', zh: '糯米香' },
    'TAG-STRONG': { ru: 'Крепкий', zh: '浓烈' },
    'TAG-SUSHI': { ru: 'Для суши', zh: '寿司用' },
    'TAG-SWEET': { ru: 'Сладкий', zh: '甘甜' },
    'TAG-TAIWAN': { ru: 'Тайвань', zh: '台湾' },
    'TAG-THAI-TEA': { ru: 'Тайский чай', zh: '泰国茶' },
    'TAG-TIBET': { ru: 'Тибет', zh: '西藏' },
    'TAG-TIPPY': { ru: 'Типсовый', zh: '多芽' },
    'TAG-TONIC': { ru: 'Тонизирующий', zh: '提神' },
    'TAG-TOP-GRADE': { ru: 'Высший сорт', zh: '特级' },
    'TAG-TOP-WORLD': { ru: 'Мировой уровень', zh: '世界顶级' },
    'TAG-TRADITIONAL': { ru: 'Традиционный', zh: '传统' },
    'TAG-UJEON': { ru: 'Уджон', zh: '雨前' },
    'TAG-UMAMI': { ru: 'Умами', zh: '鲜味' },
    'TAG-UNIQUE': { ru: 'Уникальный', zh: '独特' },
    'TAG-UVA': { ru: 'Ува', zh: '乌瓦' },
    'TAG-VIETNAMESE-TEA': { ru: 'Вьетнамский чай', zh: '越南茶' },
    'TAG-WAKOCHA': { ru: 'Вакотя', zh: '和红茶' },
    'TAG-WARMING': { ru: 'Согревающий', zh: '暖身' },
    'TAG-WEIGHT-LOSS': { ru: 'Для похудения', zh: '减肥' },
    'TAG-WHITE-TEA': { ru: 'Белый чай', zh: '白茶' },
    'TAG-WILD-TEA': { ru: 'Дикий чай', zh: '野茶' },
    'TAG-WILD-TREE': { ru: 'Дикое дерево', zh: '野生古树' },
    'TAG-WINTER-FROST': { ru: 'Зимний мороз', zh: '冬霜' },
    'TAG-YELLOW-TEA': { ru: 'Жёлтый чай', zh: '黄茶' },
};

let patched = 0;
for (const tag of tags) {
    const tr = translations[tag.code];
    if (!tr) continue;

    for (const t of tag.translations) {
        if (t.lang === 'en-US' && tr.en) {
            t.name = tr.en;
        }
        if (t.lang === 'ru-RU' && tr.ru) {
            t.name = tr.ru;
        }
        if (t.lang === 'zh-CN' && tr.zh) {
            t.name = tr.zh;
        }
    }
    patched++;
}

fs.writeFileSync(tagsPath, JSON.stringify(tags, null, 2), 'utf-8');
console.log(`Patched ${patched} tags. Total tags: ${tags.length}`);
