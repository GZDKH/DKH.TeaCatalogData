# Участие в разработке GZDKH

Спасибо за ваш интерес к участию в экосистеме GZDKH! Это руководство описывает рабочий процесс, соглашения и стандарты качества для всех репозиториев.

> **English version:** [CONTRIBUTING.md](CONTRIBUTING.md)

## Содержание

- [Начало работы](#начало-работы)
- [Рабочий процесс](#рабочий-процесс)
- [Соглашение о коммитах](#соглашение-о-коммитах)
- [Именование веток](#именование-веток)
- [Процесс Pull Request](#процесс-pull-request)
- [Контроль качества](#контроль-качества)
- [Стиль кода](#стиль-кода)
- [Доска проекта](#доска-проекта)

## Начало работы

1. Сделайте fork репозитория (или клонируйте, если у вас есть доступ на запись)
2. Создайте feature-ветку от `main`
3. Внесите изменения, следуя описанным ниже соглашениям
4. Отправьте pull request

## Рабочий процесс

1. **Создайте issue**, описывающий работу (см. [Доска проекта](#доска-проекта))
2. **Создайте ветку** от `main` по правилам [Именование веток](#именование-веток)
3. **Реализуйте** изменения
4. **Запустите контроль качества** перед коммитом (см. [Контроль качества](#контроль-качества))
5. **Закоммитьте** по [Соглашению о коммитах](#соглашение-о-коммитах)
6. **Откройте PR** по [Процессу Pull Request](#процесс-pull-request)
7. **Учтите замечания** code review
8. **Слейте** после одобрения

## Соглашение о коммитах

Мы используем [Conventional Commits](https://www.conventionalcommits.org/) v1.0.0:

```
<type>(<scope>): <summary>
```

### Типы

| Тип | Описание |
|-----|----------|
| `feat` | Новая функциональность |
| `fix` | Исправление ошибки |
| `refactor` | Изменение кода без исправления ошибок и добавления функций |
| `chore` | Обслуживание, зависимости, конфигурация |
| `docs` | Только документация |
| `test` | Добавление или обновление тестов |
| `build` | Система сборки или внешние зависимости |
| `ci` | Изменения CI/CD пайплайна |
| `perf` | Улучшение производительности |
| `revert` | Откат предыдущего коммита |

### Правила

- Используйте повелительное наклонение: "add feature", а не "added feature"
- Максимум 72 символа в строке summary
- Scope должен соответствовать затронутой области (напр., `products`, `auth`, `docker`)
- Один логический блок изменений на коммит

### Примеры

```
feat(products): add bulk import endpoint
fix(auth): handle expired token refresh
refactor(grpc): migrate to typed clients
docs(api): update OpenAPI descriptions
chore(deps): upgrade DKH.Platform to 2.1.0
```

## Именование веток

```
<type>/<issue-number>-<short-description>
```

### Примеры

```
feat/123-product-import
fix/456-token-refresh
refactor/789-typed-grpc-clients
```

## Процесс Pull Request

1. **Заголовок** следует формату Conventional Commits
2. **Описание** включает:
   - Краткое описание изменений
   - Связанные issues (`Fixes #123` или `Refs #123`)
   - Заметки о тестировании
3. **Контроль качества** должен пройти успешно
4. **Минимум одно одобрение** обязательно
5. **Squash merge** в `main`

## Контроль качества

### .NET сервисы и шлюзы

```bash
# Блокирующие — должны пройти перед коммитом
dotnet build -c Release
dotnet test

# Неблокирующие — исправить перед push
dotnet format --verify-no-changes
```

### Next.js / React UI

```bash
# Блокирующие — должны пройти перед коммитом
pnpm build

# Неблокирующие — исправить перед push
pnpm lint
```

### Правила

- Никогда не коммитьте, если блокирующая проверка не прошла
- Исправьте неблокирующие предупреждения перед push в remote
- Запускайте проверки для конкретного проекта, а не для всего монорепо

## Стиль кода

### .NET

- Следуйте правилам `.editorconfig` (4 пробела, file-scoped namespaces)
- PascalCase для публичных членов, `_camelCase` для приватных полей
- Один тип на файл
- См. [agents-dotnet.md](https://github.com/GZDKH/DKH.Architecture/blob/main/docs/agents-dotnet.md) для полных правил

### Next.js / React

- TypeScript strict mode
- 2 пробела для отступов, одинарные кавычки
- PascalCase для компонентов, camelCase для утилит
- Архитектура Feature-Sliced Design
- См. [agents-nextjs.md](https://github.com/GZDKH/DKH.Architecture/blob/main/docs/agents-nextjs.md) для полных правил

## Доска проекта

Все задачи отслеживаются на [доске проекта GZDKH](https://github.com/orgs/GZDKH/projects/19).

### Создание issue

```
<type>(<scope>): <description>
```

### Метки

| Метка | Описание |
|-------|----------|
| `type:feature` | Новая функциональность |
| `type:bug` | Что-то не работает |
| `type:refactor` | Улучшение кода |
| `type:chore` | Обслуживание |
| `type:docs` | Документация |

## Архитектурная документация

Для детальных архитектурных решений, профилей сервисов и руководств по проектированию, см. репозиторий [DKH.Architecture](https://github.com/GZDKH/DKH.Architecture).

## Вопросы?

Если у вас есть вопросы об участии в разработке, откройте обсуждение в соответствующем репозитории или свяжитесь с мейнтейнерами.
